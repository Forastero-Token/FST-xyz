
<!DOCTYPE html>
<html lang="en" class="bg-black">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="images/vite.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airdrop - Forastero</title>
    <script type="module" crossorigin="" src="js/main-BXqlTIaS.js"></script>
    <link rel="stylesheet" crossorigin="" href="css/main-IBaJqnnV.css">
    <style>
        .green-button {
            background-color: #16A34A !important;
            color: white !important;
            font-weight: bold !important;
            padding: 12px 20px !important;
            border-radius: 8px !important;
            display: block !important;
            text-align: center !important;
            width: 100% !important;
            margin-top: 10px !important;
            cursor: pointer !important;
        }
        .green-button:hover {
            background-color: #22C55E !important;
        }

        .flex-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-start;
        }

        .left-section {
            width: 58%;
        }
        .right-section {
            width: 40%;
            background-color: #1E293B;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .right-section h3 {
            color: #10B981;
        }

        @media (max-width: 768px) {
            .flex-container {
                flex-direction: column;
                align-items: center;
            }

            .left-section, 
            .right-section {
                width: 100%;
                margin-bottom: 20px;
            }

            .right-section {
                padding: 10px;
            }
        }

        input {
            color: black !important;
            background-color: white !important;
            font-weight: bold !important;
        }
        .blinking-arrow {
        animation: blinkColor 1s infinite;
    }

    @keyframes blinkColor {
        0% { fill: red; }
        50% { fill: green; }
        100% { fill: red; }
    }
    </style>
</head>
<body class="max-w-[1280px] mx-auto w-full text-white">
    <header class="header flex justify-between items-center p-5 sticky top-0 bg-black lg:block lg:justify-normal">
        <div class="lg:hidden flex items-center gap-3">
            <img src="images/notcoin-logo-rounded.svg" alt="logo">
            <h1 class="typography-text-xs text-white">Forastero Airdrop</h1>
        </div>
          <div class="lg:hidden flex justify-between">
            <a class="w-[24px] h-[24px] flex flex-col gap-1 justify-center" href="/" title="home">
                <div class="w-full h-[2px] bg-white rounded-2xl"></div>
                <div class="w-full h-[2px] bg-white rounded-2xl"></div>
            </a>
        </div>

        <nav class="hidden lg:block">
            <ul class="flex items-center flex-nowrap gap-12 text-white">
                <li>
                    <a class="typography-text-xs flex items-center gap-3" href="/">
                        <img src="images/notcoin-logo-rounded.svg" alt="logo">
                        forastero
                    </a>
                </li>               
                   <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/whitepaper/">whitepaper</a></li>
           <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/roadmap/">roadmap</a></li>
           <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/staking/">staking</a></li>
          <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/airdrop/">airdrop</a></li>
          <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="https://sale.forastero.xyz/">buy</a></li>
          <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/socials/">socials</a></li>
  <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-green-400 lg:opacity-100 mix-blend-difference" href="/how_it_works/"><strong>how it works</strong></a></li>
       
            </ul>
        </nav>
    </header>

    <main class="flex gap-6 px-5 pt-[100px] lg:pt-[140px]">
        <section class="w-full lg:w-2/3 mx-auto">
<h2 class="text-3xl font-bold text-yellow-400 mb-4 text-center"><strong>Claim Your Airdrop</strong></h2>

<div class="flex-container">
    <div class="left-section">
        <p class="text-lg mb-4">Follow these steps to receive your <strong>Forastero Token</strong></p>
        <ul class="list-disc pl-5 mb-6">

            <li>‚úÖ Join our Telegram Public Group <a class="group gap-2 inline-flex items-center lg:py-px px-2 rounded-lg lg:px-2.5 lg:rounded-xl bg-white/10 hover:bg-white/15" href="https://t.me/forasteroofficialgroup" target="_blank">
                
<svg class="blinking-arrow" xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.10594 3.41932C3.10594 2.49253 3.84373 1.74121 4.75388 1.74121H18.7368C18.7365 1.74121 18.737 1.74121 18.7368 1.74121H18.7614C19.6715 1.74121 20.4093 2.49253 20.4093 3.41932V17.6832C20.4093 18.61 19.6715 19.3613 18.7614 19.3613C17.8512 19.3613 17.1134 18.61 17.1134 17.6832V7.44594L3.5886 21.2183C2.94505 21.8738 1.90162 21.8738 1.25807 21.2183C0.614498 20.563 0.614498 19.5004 1.25807 18.8451L14.7587 5.09743H4.75388C3.84373 5.09743 3.10594 4.34612 3.10594 3.41932Z"/>
</svg>
            </a></li>
            <li>‚úÖ Follow Forastero on X <a class="group gap-2 inline-flex items-center lg:py-px px-2 rounded-lg lg:px-2.5 lg:rounded-xl bg-white/10 hover:bg-white/15" href="https://x.com/Forasterotoken" target="_blank">
                
<svg class="blinking-arrow" xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.10594 3.41932C3.10594 2.49253 3.84373 1.74121 4.75388 1.74121H18.7368C18.7365 1.74121 18.737 1.74121 18.7368 1.74121H18.7614C19.6715 1.74121 20.4093 2.49253 20.4093 3.41932V17.6832C20.4093 18.61 19.6715 19.3613 18.7614 19.3613C17.8512 19.3613 17.1134 18.61 17.1134 17.6832V7.44594L3.5886 21.2183C2.94505 21.8738 1.90162 21.8738 1.25807 21.2183C0.614498 20.563 0.614498 19.5004 1.25807 18.8451L14.7587 5.09743H4.75388C3.84373 5.09743 3.10594 4.34612 3.10594 3.41932Z"/>
</svg>
            </a></li>
            <li>‚úÖ Enter your Telegram username & STX wallet.</li>
            <li>‚úÖ Click <strong>Claim Airdrop</strong> to submit request.</li>
            <li>‚úÖ Wait until the pre-sale ends for airdrop distribution.</li>
        </ul>
    </div>
   
<div class="right-section">
    <h3>üìä Live Airdrop Stats</h3> 
    <p class="text-white mt-4">Total Airdrop Request: <span id="airdrop-total">Loading...</span></p>
    <p><strong>Unlock $100 in Forastero Tokens!</strong></p>
</div>

<form id="airdrop-form" class="bg-gray-800 p-6 rounded-lg mt-6">
    <label class="text-white">Telegram Username:</label>
    <input type="text" id="telegram-username" class="w-full p-3 rounded mb-2 bg-gray-700 text-white" placeholder="@YourTelegram" required>
    <p id="telegram-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è Telegram username is required.</p>

    <br>
    <br>
    <label class="text-white">X Username:</label>
    <input type="text" id="x-username" class="w-full p-3 rounded mb-2 bg-gray-700 text-white" placeholder="@YourX" required>
    <p id="x-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è X username is required.</p>

    <br>
    <br>
    <label class="text-white mt-2">STX Wallet Address:</label>
    <input type="text" id="eth-wallet" class="w-full p-3 rounded mb-2 bg-gray-700 text-white" placeholder="SP..." required oninput="validateWalletAddress()">
    <br>
    <br>
    <p id="wallet-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è Invalid STX wallet address. Must start with "SP".</p>
    <p id="wallet-required-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è STX address is required.</p>

    <br>

    <button type="button" onclick="claimAirdrop()" class="green-button text-white p-2 rounded w-full mt-4">Claim Airdrop</button>

    <div id="verification-result" class="mt-4 text-center"></div>
</form>

<script>
function validateWalletAddress() {
    let walletInput = document.getElementById("eth-wallet");
    let walletError = document.getElementById("wallet-error");
    let walletRequiredError = document.getElementById("wallet-required-error");

    if (!walletInput.value.trim()) {
        walletRequiredError.classList.remove("hidden");
        walletError.classList.add("hidden");
        walletInput.setCustomValidity("STX address is required");
    } else if (!walletInput.value.startsWith("SP")) {
        walletRequiredError.classList.add("hidden");
        walletError.classList.remove("hidden");
        walletInput.setCustomValidity("Wallet address must start with 'SP'");
    } else {
        walletRequiredError.classList.add("hidden");
        walletError.classList.add("hidden");
        walletInput.setCustomValidity("");
    }
}

async function claimAirdrop() {
    const telegramInput = document.getElementById("telegram-username");
    const xInput = document.getElementById("x-username");
    const walletInput = document.getElementById("eth-wallet");
    const resultDiv = document.getElementById("verification-result");

    // Reset previous messages
    resultDiv.innerHTML = "";

    let hasError = false;
    
    // Validate inputs
    if (!telegramInput.value.trim() || !xInput.value.trim() || !walletInput.value.trim()) {
        resultDiv.innerHTML = "<p class='text-red-500'>‚ö†Ô∏è All fields are required.</p>";
        return;
    }

    if (!walletInput.value.startsWith("SP")) {
        resultDiv.innerHTML = "<p class='text-red-500'>‚ö†Ô∏è Invalid wallet format.</p>";
        return;
    }

    try {
        resultDiv.innerHTML = "<p class='text-yellow-400'>‚è≥ Processing your airdrop request...</p>";

        const response = await fetch("/airdrop/submit.php", {  // ‚úÖ PHP handles form submission
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams({
                telegram: encodeURIComponent(telegramInput.value.trim()),
                x_username: encodeURIComponent(xInput.value.trim()),
                wallet: encodeURIComponent(walletInput.value.trim())
            })
        });

        const responseText = await response.text();  // ‚úÖ Ensure proper error handling

        try {
            const data = JSON.parse(responseText);  // ‚úÖ Try parsing JSON
            if (response.ok) {
                resultDiv.innerHTML = `<p class='text-green-500'>üéâ ${data.message}</p>`;
                telegramInput.value = "";
                xInput.value = "";
                walletInput.value = "";
                fetchAirdropStats();  // ‚úÖ Refresh stats after a successful claim
            } else {
                resultDiv.innerHTML = `<p class='text-red-500'>‚ùå ${data.message}</p>`;
            }
        } catch (jsonError) {
            console.error("‚ùå Invalid JSON response:", responseText);
            resultDiv.innerHTML = "<p class='text-red-500'>‚ö†Ô∏è Server error. Try again later.</p>";
        }
    } catch (error) {
        console.error("‚ùå Error claiming airdrop:", error);
        resultDiv.innerHTML = "<p class='text-red-500'>‚ö†Ô∏è Network error. Try again later.</p>";
    }
}

async function fetchAirdropStats() {
    try {
        const response = await fetch("https://forastero.xyz/stats");  // ‚úÖ Flask fetches stats
        const data = await response.json();
        document.getElementById("airdrop-total").innerText = data.total_claims;
    } catch (error) {
        console.error("‚ùå Error fetching airdrop stats:", error);
        document.getElementById("airdrop-total").innerText = "Error";
    }
}

window.onload = fetchAirdropStats;
</script>


</body>
</html>



