
<!DOCTYPE html>
<html lang="en" class="bg-black">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="images/vite.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airdrop - Forastero</title>
    <script type="module" crossorigin="" src="js/main-BXqlTIaS.js"></script>
    <link rel="stylesheet" crossorigin="" href="css/main-IBaJqnnV.css">
    <style>
        .green-button {
            background-color: #16A34A !important;
            color: white !important;
            font-weight: bold !important;
            padding: 12px 20px !important;
            border-radius: 8px !important;
            display: block !important;
            text-align: center !important;
            width: 100% !important;
            margin-top: 10px !important;
            cursor: pointer !important;
        }
        .green-button:hover {
            background-color: #22C55E !important;
        }

        .flex-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-start;
        }

        .left-section {
            width: 58%;
        }
        .right-section {
            width: 40%;
            background-color: #1E293B;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .right-section h3 {
            color: #10B981;
        }

        @media (max-width: 768px) {
            .flex-container {
                flex-direction: column;
                align-items: center;
            }

            .left-section, 
            .right-section {
                width: 100%;
                margin-bottom: 20px;
            }

            .right-section {
                padding: 10px;
            }
        }

        input {
            color: black !important;
            background-color: white !important;
            font-weight: bold !important;
        }
    </style>
</head>
<body class="max-w-[1280px] mx-auto w-full text-white">
    <header class="header flex justify-between items-center p-5 sticky top-0 bg-black lg:block lg:justify-normal">
        <div class="lg:hidden flex items-center gap-3">
            <img src="images/notcoin-logo-rounded.svg" alt="logo">
            <h1 class="typography-text-xs text-white">Forastero Airdrop</h1>
        </div>
          <div class="lg:hidden flex justify-between">
            <a class="w-[24px] h-[24px] flex flex-col gap-1 justify-center" href="/" title="home">
                <div class="w-full h-[2px] bg-white rounded-2xl"></div>
                <div class="w-full h-[2px] bg-white rounded-2xl"></div>
            </a>
        </div>

        <nav class="hidden lg:block">
            <ul class="flex items-center flex-nowrap gap-12 text-white">
                <li>
                    <a class="typography-text-xs flex items-center gap-3" href="/">
                        <img src="images/notcoin-logo-rounded.svg" alt="logo">
                        forastero
                    </a>
                </li>               
                   <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/whitepaper/">whitepaper</a></li>
           <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/roadmap/">roadmap</a></li>
           <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/staking/">staking</a></li>
          <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/airdrop/">airdrop</a></li>
          <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/buy/">buy</a></li>
          <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-blue-400 lg:opacity-100 mix-blend-difference" href="/socials/">socials</a></li>
  <li><a class="typography-text-xs-mobile lg:typography-text-xs font-bold text-blue-500 lg:hover:text-green-400 lg:opacity-100 mix-blend-difference" href="/how_it_works/"><strong>how it works</strong></a></li>
       
            </ul>
        </nav>
    </header>

    <main class="flex gap-6 px-5 pt-[100px] lg:pt-[140px]">
        <section class="w-full lg:w-2/3 mx-auto">
<h2 class="text-3xl font-bold text-yellow-400 mb-4 text-center"><strong>Claim Your Airdrop</strong></h2>

<div class="flex-container">
    <div class="left-section">
        <p class="text-lg mb-4">Follow these steps to receive your <strong>Forastero Token</strong></p>
        <ul class="list-disc pl-5 mb-6">

            <li>‚úÖ Join our Telegram Public Group <a class="group gap-2 inline-flex items-center lg:py-px px-2 rounded-lg lg:px-2.5 lg:rounded-xl bg-white/10 hover:bg-white/15" href="https://t.me/forasteroofficialgroup" target="_blank">
                <svg class="fill-white/30 group-hover:fill-white w-[18px] h-[19px] lg:w-[22px] lg:h-[23px]" xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.10594 3.41932C3.10594 2.49253 3.84373 1.74121 4.75388 1.74121H18.7368C18.7365 1.74121 18.737 1.74121 18.7368 1.74121H18.7614C19.6715 1.74121 20.4093 2.49253 20.4093 3.41932V17.6832C20.4093 18.61 19.6715 19.3613 18.7614 19.3613C17.8512 19.3613 17.1134 18.61 17.1134 17.6832V7.44594L3.5886 21.2183C2.94505 21.8738 1.90162 21.8738 1.25807 21.2183C0.614498 20.563 0.614498 19.5004 1.25807 18.8451L14.7587 5.09743H4.75388C3.84373 5.09743 3.10594 4.34612 3.10594 3.41932Z"></path>
                </svg>
            </a></li>
            
            <li>‚úÖ Enter your Telegram username & STX wallet.</li>
            <li>‚úÖ Click <strong>Claim Airdrop</strong> to submit request.</li>
            <li>‚úÖ Wait until the pre-sale ends for airdrop distribution.</li>
        </ul>
    </div>
   
<div class="right-section">
    <h3>üìä Live Airdrop Stats</h3> 
    <p class="text-white mt-4">Total Airdrop Request: <span id="airdrop-total">Loading...</span></p>
    <p>Claimable: <strong id="airdrop-balance">500,000</strong> FST</p>
</div>

<form id="airdrop-form" class="bg-gray-800 p-6 rounded-lg mt-6">
    <label class="text-white">Telegram Username:</label>
    <input type="text" id="telegram-username" class="w-full p-3 rounded mb-2 bg-gray-700 text-white" placeholder="@YourUsername" required>
    <p id="username-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è Telegram username is required.</p>

    <br><br>

  <label class="text-white mt-2">STX Wallet Address:</label>
<input type="text" id="eth-wallet" class="w-full p-3 rounded mb-2 bg-gray-700 text-white" placeholder="SP..." required oninput="validateWalletAddress()">
<p id="wallet-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è Invalid STX wallet address. Must start with "SP".</p>
<p id="wallet-required-error" class="text-red-500 text-sm hidden">‚ö†Ô∏è STX address is required.</p>

<br><br>

<script>
function validateWalletAddress() {
    let walletInput = document.getElementById("eth-wallet");
    let walletError = document.getElementById("wallet-error");
    let walletRequiredError = document.getElementById("wallet-required-error");

    if (!walletInput.value.trim()) {
        walletRequiredError.classList.remove("hidden"); // Show required error
        walletError.classList.add("hidden"); // Hide "must start with SP" error
        walletInput.setCustomValidity("STX address is required"); // Prevent form submission
    } else if (!walletInput.value.startsWith("SP")) {
        walletRequiredError.classList.add("hidden"); // Hide required error
        walletError.classList.remove("hidden"); // Show "must start with SP" error
        walletInput.setCustomValidity("Wallet address must start with 'SP'"); // Prevent form submission
    } else {
        walletRequiredError.classList.add("hidden"); // Hide required error
        walletError.classList.add("hidden"); // Hide "must start with SP" error
        walletInput.setCustomValidity(""); // Allow form submission
    }
}

function validateFormBeforeSubmit() {
    let walletInput = document.getElementById("eth-wallet");
    if (!walletInput.value.trim()) {
        document.getElementById("wallet-required-error").classList.remove("hidden");
        return false; // Prevent action
    }
    return true; // Allow action
}

// Attach validation to the button click
document.getElementById("proceed-button")?.addEventListener("click", function(event) {
    if (!validateFormBeforeSubmit()) {
        event.preventDefault(); // Stop button action if validation fails
    }
});

document.getElementById("claim-button")?.addEventListener("click", function(event) {
    if (!validateFormBeforeSubmit()) {
        event.preventDefault(); // Stop button action if validation fails
    }
});
</script>
    <button type="button" onclick="claimAirdrop()" class="green-button text-white p-2 rounded w-full mt-4">Claim Airdrop</button>

    <!-- üéâ Message will now appear directly below the button -->
    <div id="verification-result" class="mt-4 text-center"></div> 
</form>

<script>
    async function claimAirdrop() {
        const usernameInput = document.getElementById("telegram-username");
        const walletInput = document.getElementById("eth-wallet");
        const username = usernameInput.value.trim();
        const wallet = walletInput.value.trim();
        const resultDiv = document.getElementById("verification-result");

        // Error message elements
        const usernameError = document.getElementById("username-error");
        const walletError = document.getElementById("wallet-error");

        // Reset previous error states
        usernameError.classList.add("hidden");
        walletError.classList.add("hidden");
        usernameInput.classList.remove("border-red-500");
        walletInput.classList.remove("border-red-500");

        let hasError = false;

        // Check for missing fields
        if (!username) {
            usernameError.classList.remove("hidden");
            usernameInput.classList.add("border-red-500");
            hasError = true;
        }
        if (!wallet) {
            walletError.classList.remove("hidden");
            walletInput.classList.add("border-red-500");
            hasError = true;
        }
        if (hasError) return;

        try {
            resultDiv.innerHTML = "<p class='text-yellow-400'>‚è≥ Processing your airdrop request...</p>";

            const response = await fetch("https://forastero.xyz/claim", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username, wallet })
            });

            const data = await response.json();

            if (response.ok) {
                resultDiv.innerHTML = `<p class='text-green-500'>üéâ ${data.message}</p>`;
                
                // Clear input fields on success
                usernameInput.value = "";
                walletInput.value = "";

                // Update total claim count
                document.getElementById("airdrop-total").innerText = data.total_claims;
            } else {
                resultDiv.innerHTML = `<p class='text-red-500'>‚ùå ${data.message}</p>`;
            }
        } catch (error) {
            console.error("‚ùå Error claiming airdrop:", error);
            resultDiv.innerHTML = "<p class='text-red-500'>‚ö†Ô∏è Server error. Try again later.</p>";
        }
    }

    async function fetchAirdropStats() {
        try {
            const response = await fetch("https://forastero.xyz/stats");
            const data = await response.json();
            document.getElementById("airdrop-total").innerText = data.total_claims;
        } catch (error) {
            console.error("‚ùå Error fetching airdrop stats:", error);
            document.getElementById("airdrop-total").innerText = "Error";
        }
    }

    // Fetch airdrop stats on page load
    window.onload = fetchAirdropStats;
</script>

</body>
</html>



